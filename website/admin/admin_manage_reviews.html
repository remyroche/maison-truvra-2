<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Product Reviews - Maison Trüvra Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="css/admin_styles.css"> <style>
        /* Add any page-specific styles here if not covered by admin_styles.css or Tailwind */
        /* Ensure brand colors are defined in admin_styles.css or via Tailwind config */
        .bg-brand-light { background-color: #f8f5f2; /* Example light background */ }
        .text-brand-primary { color: #4a3b31; /* Example primary text */ }
        .text-brand-dark-taupe { color: #5d534c; /* Example dark taupe */ }
        .focus\:ring-brand-primary:focus { /* Example focus ring */
            --tw-ring-color: #4a3b31;
        }
        .focus\:border-brand-primary:focus { /* Example focus border */
            border-color: #4a3b31;
        }
        .bg-brand-primary { background-color: #4a3b31; }
        .hover\:bg-brand-secondary:hover { background-color: #6f5f54; /* Example secondary */ }
    </style>
</head>
<body class="bg-brand-light flex"> {/* */}
    <div id="sidebar-container" class="bg-gray-800 text-white w-64 space-y-6 py-7 px-2 fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition duration-200 ease-in-out">
        </div>

    <div class="flex-1 p-6 md:p-10 md:ml-64"> <header class="mb-8">
            <h1 class="text-3xl font-serif text-brand-primary" data-i18n="admin.reviews.pageTitle">Gestion des Avis Produits</h1>
        </header>

        <div class="mb-6 bg-white p-4 rounded-lg shadow">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                <div>
                    <label for="filter-status" class="block text-sm font-medium text-brand-dark-taupe" data-i18n="admin.reviews.filterStatus">Statut</label>
                    <select id="filter-status" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm rounded-md">
                        <option value="all" data-i18n="admin.reviews.statusAll">Tous</option>
                        <option value="pending" data-i18n="admin.reviews.statusPending">En attente</option>
                        <option value="approved" data-i18n="admin.reviews.statusApproved">Approuvés</option>
                        <option value="rejected" data-i18n="admin.reviews.statusRejected">Rejetés</option> {/* Added rejected state */}
                    </select>
                </div>
                <div>
                    <label for="filter-product-id" class="block text-sm font-medium text-brand-dark-taupe" data-i18n="admin.reviews.filterProductId">ID Produit (Optionnel)</label>
                    <input type="number" id="filter-product-id" placeholder_i18n="admin.reviews.filterProductIdPlaceholder" placeholder="Entrer ID Produit" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm">
                </div>
                <button id="apply-filters-btn" class="bg-brand-primary hover:bg-brand-secondary text-white font-semibold py-2 px-4 rounded-md transition duration-150" data-i18n="admin.form.applyFilters">Appliquer Filtres</button>
            </div>
        </div>

        <div class="bg-white shadow-lg rounded-lg overflow-x-auto">
            <table class="min-w-full leading-normal"> {/* Removed "table" class if it's not a specific utility like from Bootstrap */}
                <thead>
                    <tr class="bg-gray-100 text-left text-brand-dark-taupe text-sm font-semibold">
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thId">ID</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thProduct">Produit</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thUser">Utilisateur</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thRating">Note</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thComment">Commentaire</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thDate">Date</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thStatus">Statut</th>
                        <th class="px-5 py-3 border-b-2 border-gray-200" data-i18n="admin.reviews.thActions">Actions</th>
                    </tr>
                </thead>
                <tbody id="reviews-table-body" class="text-sm">
                    <tr>
                        <td colspan="8" class="text-center py-10" id="loading-reviews-row">
                            <i class="fas fa-spinner fa-spin text-2xl text-brand-primary"></i>
                            <p class="mt-2" data-i18n="admin.reviews.loading">Chargement des avis...</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div id="pagination-controls" class="mt-6 flex justify-center items-center space-x-2">
            </div>
    </div>

    <div id="admin-comment-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-1/4 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"> {/* Adjusted width and centering */}
            <div class="flex justify-between items-center border-b pb-3">
                 <h3 class="text-lg leading-6 font-medium text-gray-900" data-i18n="admin.reviews.modalTitle">Commentaire Admin (Optionnel)</h3>
                 <button type="button" id="close-admin-comment-modal-btn" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="mt-3">
                <div class="mt-2 px-2 py-3">
                    <textarea id="admin-comment-textarea" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-brand-primary focus:border-brand-primary sm:text-sm" placeholder_i18n="admin.reviews.modalPlaceholder"></textarea>
                </div>
                <div class="items-center px-4 py-3 space-x-2 text-right"> {/* Aligned buttons to right */}
                    <button id="modal-cancel-btn" class="px-4 py-2 bg-gray-200 text-gray-700 text-base font-medium rounded-md w-auto shadow-sm hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400" data-i18n="admin.form.cancel">Annuler</button>
                    <button id="modal-confirm-action-btn" class="px-4 py-2 bg-brand-primary text-white text-base font-medium rounded-md w-auto shadow-sm hover:bg-brand-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-primary" data-i18n="admin.form.confirm">Confirmer</button>
                </div>
            </div>
        </div>
    </div>

    <div id="admin-global-message" class="hidden fixed bottom-5 right-5 bg-brand-primary text-white p-4 rounded-lg shadow-md z-[1060]">
        <p id="admin-global-message-text"></p>
        <button id="close-admin-global-message" class="ml-4 text-xl">&times;</button>
    </div>


    <script src="../js/config.js"></script>
    <script src="../js/i18n.js"></script>
    
    <script src="js/admin_api.js"></script> <script src="js/admin_auth.js"></script> <script src="js/admin_ui.js"></script>   <script src="js/admin_main.js"></script> <script src="js/admin_reviews.js"></script> </body>
</html>
