<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Professionnels - Maison Trüvra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"><!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="Titre_Page_Professionnels">Espace Professionnels - Maison Trüvra</title> <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script>
        tailwind.config = { /* ... your tailwind config ... */ }
    </script>
    <style>
        /* ... your existing styles from professionnels.html ... */
        body {font-family: 'Inter', sans-serif; background-color: #F5EEDE; color: #7D6A4F;}
        h1, h2, h3, .font-serif {font-family: 'Playfair Display', serif;}
        .btn-primary {background-color: #7D6A4F; color: #F5EEDE; padding: 0.85rem 1.75rem; border-radius: 0.375rem; transition: background-color 0.3s ease, transform 0.2s ease; font-weight: 500; letter-spacing: 0.025em; display: inline-block; cursor: pointer;}
        .btn-primary:hover {background-color: #11120D; transform: translateY(-2px);}
        .btn-secondary { background-color: #A28C6A; color: #F5EEDE; /* ... */ }
        .btn-secondary:hover { background-color: #7D6A4F; /* ... */ }
        .form-input-pro { @apply w-full px-4 py-3 text-brand-near-black bg-white border border-brand-warm-taupe/50 rounded-md focus:outline-none focus:ring-2 focus:ring-brand-classic-gold shadow-sm; }
        .modal-message { @apply fixed bottom-5 right-5 bg-brand-deep-sage-green text-brand-cream p-4 rounded-lg shadow-xl z-[100] transition-all duration-500 ease-out opacity-0 translate-y-10; }
        .modal-message.show { @apply opacity-100 translate-y-0; }
        .pro-dashboard-section { display: none; } /* Hidden by default */
        .error-message { @apply text-xs text-red-600 mt-1; }
    </style>
</head>
<body id="page-professionnels" class="antialiased" data-page-title-key="Titre_Page_Professionnels">

    <div id="header-placeholder"></div>

    <main class="bg-brand-cream">
        <section id="pro-logged-out-view" class="py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h1 class="text-3xl sm:text-4xl font-serif italic text-brand-earth-brown mb-8 text-center" data-translate-key="Espace_professionnels_Titre">Espace professionnels</h1>

                <div class="grid md:grid-cols-2 gap-12 items-start">
                    <div class="bg-white shadow-xl rounded-lg p-8">
                        <h2 class="text-2xl font-serif text-brand-near-black mb-5" data-translate-key="Pro_Deja_client_Connectez-vous">Déjà Professionnel ? Connectez-vous</h2>
                        <form id="pro-login-form" class="space-y-5">
                            <div id="pro-login-message" class="text-sm text-brand-truffle-burgundy mb-4"></div>
                            <div>
                                <label for="pro-login-email" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Adresse_e-mail">Adresse e-mail</label>
                                <input type="email" id="pro-login-email" name="email" class="form-input-pro" required autocomplete="email">
                            </div>

                            <div>
                                <label for="pro-login-password" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Mot_de_passe">Mot de passe</label>
                                <input type="password" id="pro-login-password" name="password" class="form-input-pro" required>
                                <a href="#" id="pro-forgot-password-link" class="text-xs text-brand-warm-taupe hover:text-brand-classic-gold block mt-1 text-right" data-translate-key="Mot_de_passe_oublie">Mot de passe oublié ?</a>
                            </div>
                            <button type="submit" class="btn-primary w-full py-3" data-translate-key="Se_connecter">Se connecter</button>
                            
                            <div id="forgot-password-modal" class="modal-overlay" style="display:none;">
                                <div class="modal-content text-left max-w-md">
                                    <h3 class="text-xl font-serif text-brand-near-black mb-4" data-translate-key="Pro_Reinitialiser_Mot_De_Passe_Titre">Réinitialiser le mot de passe</h3>
                                    <form id="pro-forgot-password-form" class="space-y-4">
                                        <p class="text-sm text-brand-earth-brown" data-translate-key="Pro_Instructions_Mot_De_Passe_Oublie">
                                            Veuillez entrer votre adresse e-mail. Si un compte correspondant existe, nous vous enverrons (théoriquement) un lien pour réinitialiser votre mot de passe.
                                        </p>
                                        <div id="pro-forgot-password-message" class="text-sm my-2"></div>
                                        <div>
                                            <label for="pro-forgot-email" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Adresse_e-mail">Adresse e-mail</label>
                                            <input type="email" id="pro-forgot-email" name="email" class="form-input-pro" required>
                                        </div>
                                        <div class="flex justify-end space-x-3 pt-3">
                                            <button type="button" id="pro-cancel-forgot-password" class="btn-secondary text-sm" data-translate-key="Annuler">Annuler</button>
                                            <button type="submit" class="btn-primary text-sm" data-translate-key="Pro_Envoyer_Lien_Reinitialisation">Envoyer le lien</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                    <div class="bg-white shadow-xl rounded-lg p-8">
                        <h2 class="text-2xl font-serif text-brand-near-black mb-5" data-translate-key="Pro_Nouveau_client_Creer_compte">Nouveau Professionnel ? Créez un compte</h2>
                        <form id="pro-register-form" class="space-y-5">
                             <div id="pro-register-message" class="text-sm text-brand-truffle-burgundy mb-4"></div>
                            <div>
                                <label for="pro-register-company-name" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Nom_entreprise">Nom de l'entreprise</label>
                                <input type="text" id="pro-register-company-name" name="company_name" class="form-input-pro" required>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="pro-register-prenom" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Prenom_contact">Prénom (Contact)</label>
                                    <input type="text" id="pro-register-prenom" name="prenom" class="form-input-pro" required>
                                </div>
                                <div>
                                    <label for="pro-register-nom" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Nom_contact">Nom (Contact)</label>
                                    <input type="text" id="pro-register-nom" name="nom" class="form-input-pro" required>
                                </div>
                            </div>
                            <div>
                                <label for="pro-register-email" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Adresse_e-mail">Adresse e-mail</label>
                                <input type="email" id="pro-register-email" name="email" class="form-input-pro" required autocomplete="email">
                            </div>
                            <div>
                                <label for="pro-register-phone" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Telephone_optionnel">Téléphone (Optionnel)</label>
                                <input type="tel" id="pro-register-phone" name="phone_number" class="form-input-pro" autocomplete="tel">
                            </div>
                            <div>
                                <label for="pro-register-password" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Mot_de_passe">Mot de passe</label>
                                <input type="password" id="pro-register-password" name="password" class="form-input-pro" required>
                            </div>
                            <div>
                                <label for="pro-register-confirm-password" class="block text-sm font-medium text-brand-near-black mb-1" data-translate-key="Confirmer_mot_de_passe">Confirmer mot de passe</label>
                                <input type="password" id="pro-register-confirm-password" name="confirm_password" class="form-input-pro" required>
                            </div>
                            <button type="submit" class="btn-secondary w-full py-3" data-translate-key="Creer_un_compte_professionnel">Créer un compte professionnel</button>
                        </form>
                    </div>
                </div>
                <div class="max-w-3xl mx-auto text-lg text-brand-earth-brown space-y-8 text-center leading-relaxed mt-12">
                    <p data-translate-key="Pro_Texte_Intro1">Fruit de notre artisanat méticuleux et de notre environnement contrôlé, nos truffes sont récoltées au moment précis où elles atteignent leur pic de maturité aromatique.</p>
                    <p data-translate-key="Pro_Texte_Intro2">Nous proposons aux professionnels de la gastronomie des truffes melanosporum fraîches d'une qualité exceptionnelle, idéales pour sublimer vos créations culinaires.</p>
                    <div class="mt-12 pt-2">
                        <p class="mb-6" data-translate-key="Pro_Texte_Contact_Demande">Pour toute demande de tarifs, informations sur les disponibilités ou partenariats, veuillez nous contacter directement :</p>
                        <a href="mailto:professionnels@maisontruvra.com" class="text-2xl text-brand-classic-gold hover:text-brand-earth-brown font-semibold block mt-4 transition-colors duration-300">professionnels@maisontruvra.com</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="pro-dashboard-view" class="pro-dashboard-section py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl sm:text-4xl font-serif text-brand-near-black" data-translate-key="Pro_Mon_Espace_Titre">Mon Espace Professionnel</h1>
                    <button id="pro-logout-button" class="btn-secondary text-sm" data-translate-key="Se_deconnecter">Se déconnecter</button>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    <div class="md:col-span-1 bg-white shadow-xl rounded-lg p-6">
                        <h2 class="text-xl font-serif text-brand-near-black mb-5" data-translate-key="Pro_Gestion_Compte">Gestion de Compte</h2>
                        <div id="pro-account-info" class="mb-6 text-sm space-y-1">
                            <p><strong><span data-translate-key="Nom_entreprise">Entreprise</span>:</strong> <span id="pro-dashboard-company-name"></span></p>
                            <p><strong><span data-translate-key="Contact">Contact</span>:</strong> <span id="pro-dashboard-contact-name"></span></p>
                            <p><strong><span data-translate-key="Email">Email</span>:</strong> <span id="pro-dashboard-email"></span></p>
                            <p><strong><span data-translate-key="Telephone">Téléphone</span>:</strong> <span id="pro-dashboard-phone"></span></p>
                        </div>
                        <button id="pro-show-update-form-button" class="btn-primary w-full text-sm mb-3" data-translate-key="Pro_Modifier_Infos">Modifier mes informations</button>

                        <form id="pro-update-account-form" class="space-y-4 mt-4" style="display:none;">
                            <h3 class="text-md font-semibold" data-translate-key="Pro_Modifier_Details_Titre">Modifier les détails :</h3>
                             <div id="pro-update-message" class="text-sm text-brand-truffle-burgundy my-2"></div>
                            <div><label for="pro-update-company-name" class="block text-xs font-medium" data-translate-key="Nom_entreprise">Nom Entreprise</label><input type="text" id="pro-update-company-name" class="form-input-pro text-sm"></div>
                            <div><label for="pro-update-prenom" class="block text-xs font-medium" data-translate-key="Prenom_contact">Prénom Contact</label><input type="text" id="pro-update-prenom" class="form-input-pro text-sm"></div>
                            <div><label for="pro-update-nom" class="block text-xs font-medium" data-translate-key="Nom_contact">Nom Contact</label><input type="text" id="pro-update-nom" class="form-input-pro text-sm"></div>
                            <div><label for="pro-update-email" class="block text-xs font-medium" data-translate-key="Email">Email</label><input type="email" id="pro-update-email" class="form-input-pro text-sm"></div>
                            <div><label for="pro-update-phone" class="block text-xs font-medium" data-translate-key="Telephone">Téléphone</label><input type="tel" id="pro-update-phone" class="form-input-pro text-sm"></div>
                            <hr>
                            <h3 class="text-md font-semibold pt-2" data-translate-key="Pro_Changer_Mot_De_Passe">Changer de mot de passe :</h3>
                            <div><label for="pro-update-current-password" class="block text-xs font-medium" data-translate-key="Pro_Mot_de_passe_actuel">Mot de passe actuel (requis pour changer MDP)</label><input type="password" id="pro-update-current-password" class="form-input-pro text-sm"></div>
                            <div><label for="pro-update-new-password" class="block text-xs font-medium" data-translate-key="Pro_Nouveau_mot_de_passe">Nouveau mot de passe</label><input type="password" id="pro-update-new-password" class="form-input-pro text-sm"></div>
                            <div><label for="pro-update-confirm-password" class="block text-xs font-medium" data-translate-key="Pro_Confirmer_nouveau_mot_de_passe">Confirmer nouveau mot de passe</label><input type="password" id="pro-update-confirm-password" class="form-input-pro text-sm"></div>
                            <div class="flex space-x-2">
                                <button type="submit" class="btn-primary text-sm" data-translate-key="Pro_Enregistrer_Modifs">Enregistrer Modifications</button>
                                <button type="button" id="pro-cancel-update-form-button" class="btn-secondary text-sm" data-translate-key="Annuler">Annuler</button>
                            </div>
                        </form>
                    </div>

                    <div class="md:col-span-2 bg-white shadow-xl rounded-lg p-6">
                        <h2 class="text-xl font-serif text-brand-near-black mb-5" data-translate-key="Pro_Mes_Factures">Mes Factures</h2>
                        <div id="pro-invoices-list-container" class="max-h-96 overflow-y-auto">
                            <p class="text-brand-warm-taupe italic" data-translate-key="Pro_Chargement_Factures">Chargement des factures...</p>
                            </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="footer-placeholder"></div>

    <div id="global-message-toast" style="display:none;" class="modal-message">
        <p id="global-message-text"></p>
    </div>

    <script src="js/config.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/ui.js"></script> <script src="js/api.js"></script> <script src="js/auth.js"></script> <script src="js/professional.js"></script>

    <script src="js/main.js"></script>
</body>
</html>
