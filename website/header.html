<header class="bg-brand-cream shadow-md sticky top-0 z-40">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between h-24">
            <div class="flex-shrink-0">
                <a href="index.html">
                    <img class="h-16 w-auto" src="image_6be700.png" alt="Logo Maison Trüvra" onerror="this.alt='Logo Maison Trüvra'; this.src='https://placehold.co/150x60/F5EEDE/7D6A4F?text=Maison+Trüvra';">
                </a>
            </div>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="index.html" id="nav-homepage" class="nav-link text-brand-earth-brown hover:text-brand-near-black px-3 py-2 text-base font-medium" data-translate-key="Accueil">Accueil</a>
                <a href="nos-produits.html" id="nav-products-list" class="nav-link text-brand-earth-brown hover:text-brand-near-black px-3 py-2 text-base font-medium" data-translate-key="Nos_Produits">Nos Produits</a>
                <a href="notre-histoire.html" id="nav-about" class="nav-link text-brand-earth-brown hover:text-brand-near-black px-3 py-2 text-base font-medium" data-translate-key="Notre_Histoire">Notre Histoire</a>
                <a href="professionnels.html" id="nav-professionals" class="nav-link text-brand-earth-brown hover:text-brand-near-black px-3 py-2 text-base font-medium" data-translate-key="Professionnels">Professionnels</a>
            </nav>
            <div class="hidden md:flex items-center space-x-5">
                <a href="compte.html" title="Mon Compte" class="text-brand-earth-brown hover:text-brand-near-black" data-translate-key-title="Mon_Compte">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                    <span id="account-link-text-desktop" class="ml-1 text-xs" data-translate-key="Mon_Compte_Menu">Mon Compte</span>
                </a>
                <a href="panier.html" title="Panier" class="text-brand-earth-brown hover:text-brand-near-black relative" data-translate-key-title="Panier">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" /></svg>
                    <span id="cart-item-count" class="absolute -top-2 -right-2 bg-brand-truffle-burgundy text-brand-cream text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
                <div class="relative lang-switcher">
                    <button type="button" class="text-brand-earth-brown hover:text-brand-near-black px-2 py-1 text-sm font-medium border border-brand-warm-taupe rounded-md" onclick="toggleLangDropdown()">
                        <span id="current-lang-display">FR</span> <svg class="w-4 h-4 inline-block" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </button>
                    <div id="lang-dropdown" class="absolute right-0 mt-2 w-20 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 hidden">
                        <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" onclick="changeLanguage('fr'); return false;">FR</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" onclick="changeLanguage('en'); return false;">EN</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="md:hidden flex items-center">
                 <a href="panier.html" title="Panier" class="text-brand-earth-brown hover:text-brand-near-black relative mr-4" data-translate-key-title="Panier">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" /></svg>
                    <span id="mobile-cart-item-count" class="absolute -top-2 -right-2 bg-brand-truffle-burgundy text-brand-cream text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </a>
                <div class="relative lang-switcher-mobile mr-2">
                    <button type="button" class="text-brand-earth-brown hover:text-brand-near-black px-2 py-1 text-sm font-medium border border-brand-warm-taupe rounded-md" onclick="toggleLangDropdownMobile()">
                        <span id="current-lang-display-mobile">FR</span> <svg class="w-4 h-4 inline-block" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </button>
                    <div id="lang-dropdown-mobile" class="absolute right-0 mt-2 w-20 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 hidden">
                        <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu-mobile">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" onclick="changeLanguage('fr'); return false;">FR</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" role="menuitem" onclick="changeLanguage('en'); return false;">EN</a>
                        </div>
                    </div>
                </div>
                <button type="button" id="mobile-menu-button" class="text-brand-earth-brown hover:text-brand-near-black focus:outline-none">
                    <span class="sr-only" data-translate-key="Ouvrir_menu_principal">Ouvrir le menu principal</span>
                    <svg class="h-7 w-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
                </button>
            </div>
        </div>
    </div>
    <div class="md:hidden hidden" id="mobile-menu-dropdown">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="index.html" class="nav-link text-brand-earth-brown hover:bg-brand-warm-taupe hover:text-brand-cream block px-3 py-2 rounded-md text-base font-medium" data-translate-key="Accueil">Accueil</a>
            <a href="nos-produits.html" class="nav-link text-brand-earth-brown hover:bg-brand-warm-taupe hover:text-brand-cream block px-3 py-2 rounded-md text-base font-medium" data-translate-key="Nos_Produits">Nos Produits</a>
            <a href="notre-histoire.html" class="nav-link text-brand-earth-brown hover:bg-brand-warm-taupe hover:text-brand-cream block px-3 py-2 rounded-md text-base font-medium" data-translate-key="Notre_Histoire">Notre Histoire</a>
            <a href="professionnels.html" class="nav-link text-brand-earth-brown hover:bg-brand-warm-taupe hover:text-brand-cream block px-3 py-2 rounded-md text-base font-medium" data-translate-key="Professionnels">Professionnels</a>
            <a href="compte.html" id="account-link-text-mobile" class="nav-link text-brand-earth-brown hover:bg-brand-warm-taupe hover:text-brand-cream block px-3 py-2 rounded-md text-base font-medium" data-translate-key="Mon_Compte_Menu">Mon Compte</a>
        </div>
    </div>
</header>
<script>
    function toggleLangDropdown() {
        document.getElementById('lang-dropdown').classList.toggle('hidden');
    }
    function toggleLangDropdownMobile() {
        document.getElementById('lang-dropdown-mobile').classList.toggle('hidden');
    }
    async function changeLanguage(lang) {
        await window.setLanguage(lang); // Assuming setLanguage is exposed from i18n.js
        document.getElementById('current-lang-display').textContent = lang.toUpperCase();
        document.getElementById('current-lang-display-mobile').textContent = lang.toUpperCase();
        toggleLangDropdown(); // Close dropdown
        if(document.getElementById('lang-dropdown-mobile')) toggleLangDropdownMobile();

        // Add this line to update nav link texts immediately as they are not covered by data-translate-key
        if(typeof setActiveNavLink === 'function') setActiveNavLink(); // This might also re-trigger some UI updates based on active class
    }
</script>
